# Lines configured by zsh-newuser-install
setopt autocd
bindkey -e
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
#zstyle :compinstall filename '.zshrc'

autoload -Uz compinit
compinit
# End of lines added by compinstall

# load zgen
source "${HOME}/.zgen/zgen.zsh"

export VISUAL=vim
export EDITOR=$VISUAL
# make it more responsive
export KEYTIMEOUT=1

# theme related varaibles
DISABLE_AUTO_TITLE="true"
export DEFAULT_USER=`whoami`
POWERLEVEL9K_SHORTEN_STRATEGY="truncate_middle"
POWERLEVEL9K_SHORTEN_DIR_LENGTH=3
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status vi_mode)
POWERLEVEL9K_STATUS_VERBOSE=false
POWERLEVEL9K_COLOR_SCHEME='light'
POWERLEVEL9K_ALWAYS_SHOW_CONTEXT=true

# if the init scipt doesn't exist
if ! zgen saved; then
  echo "Creating a zgen save"
  zgen oh-my-zsh
  
  # plugins
  zgen oh-my-zsh
  zgen oh-my-zsh plugins/git
  zgen oh-my-zsh plugins/sudo
  zgen oh-my-zsh plugins/command-not-found
  zgen oh-my-zsh plugins/docker
  zgen oh-my-zsh plugins/docker-compose
  zgen oh-my-zsh plugins/common-aliases
  zgen oh-my-zsh plugins/cp
  zgen oh-my-zsh plugins/extract
  zgen oh-my-zsh plugins/history

  #Theme load powerlevel9k
  zgen load bhilburn/powerlevel9k powerlevel9k
  
  #Other plugins
  zgen load zsh-users/zsh-syntax-highlighting
  zgen load zsh-users/zsh-autosuggestions    

  # generate the init script from plugins above
  zgen save
fi

if [ -d $HOME/.zshrc.d ]; then
  for file in $HOME/.zshrc.d/*.zsh; do
    source $file
  done
fi

# Local config
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local
